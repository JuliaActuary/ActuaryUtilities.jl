<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Financial Math · ActuaryUtilities.jl</title><meta name="title" content="Financial Math · ActuaryUtilities.jl"/><meta property="og:title" content="Financial Math · ActuaryUtilities.jl"/><meta property="twitter:title" content="Financial Math · ActuaryUtilities.jl"/><meta name="description" content="Documentation for ActuaryUtilities.jl."/><meta property="og:description" content="Documentation for ActuaryUtilities.jl."/><meta property="twitter:description" content="Documentation for ActuaryUtilities.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ActuaryUtilities.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ActuaryUtilities.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li class="is-active"><a class="tocitem" href>Financial Math</a><ul class="internal"><li><a class="tocitem" href="#Quickstart"><span>Quickstart</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="../sensitivities/">Key Rate Sensitivities</a></li><li><a class="tocitem" href="../risk_measures/">Risk Measures</a></li><li><a class="tocitem" href="../utilities/">Other Utilities</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../API/ActuaryUtilities/">ActuaryUtilities</a></li><li><a class="tocitem" href="../API/FinanceCore/">FinanceCore (re-exported)</a></li></ul></li><li><a class="tocitem" href="../upgrade/">Upgrade from Prior Versions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Financial Math</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Financial Math</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/master/docs/src/financial_math.md#L" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Financial-Math-Submodule"><a class="docs-heading-anchor" href="#Financial-Math-Submodule">Financial Math Submodule</a><a id="Financial-Math-Submodule-1"></a><a class="docs-heading-anchor-permalink" href="#Financial-Math-Submodule" title="Permalink"></a></h1><p>Provides a set of common routines in financial maths.</p><h2 id="Quickstart"><a class="docs-heading-anchor" href="#Quickstart">Quickstart</a><a id="Quickstart-1"></a><a class="docs-heading-anchor-permalink" href="#Quickstart" title="Permalink"></a></h2><pre><code class="language-julia hljs">cfs = [5, 5, 105]
times    = [1, 2, 3]

discount_rate = 0.03

present_value(discount_rate, cfs, times)           # 105.65
duration(Macaulay(), discount_rate, cfs, times)    #   2.86
duration(discount_rate, cfs, times)                #   2.78
convexity(discount_rate, cfs, times)               #  10.62</code></pre><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><h3 id="Exported-API"><a class="docs-heading-anchor" href="#Exported-API">Exported API</a><a id="Exported-API-1"></a><a class="docs-heading-anchor-permalink" href="#Exported-API" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.CS01"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.CS01"><code>ActuaryUtilities.FinancialMath.CS01</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">CS01 &lt;: Duration</code></pre><p>Credit Spread 01. The dollar change in value for a 1 basis point parallel shift in the credit spread, holding the risk-free (base) curve constant.</p><p>Requires both a base curve and credit spread to be specified. For a flat additive decomposition, <code>CS01 ≈ IR01 ≈ DV01</code>.</p><p>See also: <a href="#ActuaryUtilities.FinancialMath.IR01"><code>IR01</code></a>, <a href="#ActuaryUtilities.FinancialMath.DV01"><code>DV01</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL147-L155">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.DV01"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.DV01"><code>ActuaryUtilities.FinancialMath.DV01</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DV01 &lt;: Duration</code></pre><p>Dollar Value of 01. The dollar change in value for a 1 basis point (0.01%) parallel shift in rates.</p><p><code>DV01 = -∂V/∂r / 10000</code>, so a DV01 of 0.045 means the position loses 0.045 per 100 notional for a 1bp rate increase.</p><p>See also: <a href="#ActuaryUtilities.FinancialMath.IR01"><code>IR01</code></a>, <a href="#ActuaryUtilities.FinancialMath.CS01"><code>CS01</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL125-L133">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.IR01"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.IR01"><code>ActuaryUtilities.FinancialMath.IR01</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">IR01 &lt;: Duration</code></pre><p>Interest Rate 01. The dollar change in value for a 1 basis point parallel shift in the risk-free (base) curve, holding the credit spread constant.</p><p>Requires both a base curve and credit spread to be specified. For a flat additive decomposition, <code>IR01 ≈ CS01 ≈ DV01</code>.</p><p>See also: <a href="#ActuaryUtilities.FinancialMath.CS01"><code>CS01</code></a>, <a href="#ActuaryUtilities.FinancialMath.DV01"><code>DV01</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL136-L144">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.KeyRate"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.KeyRate"><code>ActuaryUtilities.FinancialMath.KeyRate</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">KeyRate(timepoints,shift=0.001)</code></pre><p>A convenience constructor for <a href="#ActuaryUtilities.FinancialMath.KeyRateZero"><code>KeyRateZero</code></a>. </p><p><strong>Extended Help</strong></p><p><a href="#ActuaryUtilities.FinancialMath.KeyRateZero"><code>KeyRateZero</code></a> is chosen as the default constructor because it has more attractive properties than <a href="#ActuaryUtilities.FinancialMath.KeyRatePar"><code>KeyRatePar</code></a>:</p><ul><li>rates after the key <code>timepoint</code> remain unaffected by the <code>shift</code><ul><li>e.g. this causes a 6-year zero coupon bond would have a negative duration if the 5-year par rate was used</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL212-L224">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.KeyRatePar"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.KeyRatePar"><code>ActuaryUtilities.FinancialMath.KeyRatePar</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">KeyRatePar(timepoint,shift=0.001) &lt;: KeyRateDuration</code></pre><p>Shift the par curve by the given amount at the given timepoint. Use in conjunction with <code>duration</code> to calculate the key rate duration. </p><p>Unlike other duration statistics which are computed using analytic derivatives, <code>KeyRateDuration</code>s are computed via a shift-and-compute the yield curve approach.</p><p><code>KeyRatePar</code> is more commonly reported (than <a href="#ActuaryUtilities.FinancialMath.KeyRateZero"><code>KeyRateZero</code></a>) in the fixed income markets, even though the latter has more analytically attractive properties. See the discussion of KeyRateDuration in the FinanceModels.jl docs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL181-L190">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.KeyRateZero"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.KeyRateZero"><code>ActuaryUtilities.FinancialMath.KeyRateZero</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">KeyRateZero(timepoint,shift=0.001) &lt;: KeyRateDuration</code></pre><p>Shift the par curve by the given amount at the given timepoint. Use in conjunction with <code>duration</code> to calculate the key rate duration.</p><p>Unlike other duration statistics which are computed using analytic derivatives, <code>KeyRateDuration</code> is computed via a shift-and-compute the yield curve approach.</p><p><code>KeyRateZero</code> is less commonly reported (than <a href="#ActuaryUtilities.FinancialMath.KeyRatePar"><code>KeyRatePar</code></a>) in the fixed income markets, even though the latter has more analytically attractive properties. See the discussion of KeyRateDuration in the FinanceModels.jl docs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL197-L205">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.KeyRates"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.KeyRates"><code>ActuaryUtilities.FinancialMath.KeyRates</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">KeyRates &lt;: Duration</code></pre><p>Dispatch type that requests the full key-rate decomposition (vector of durations or matrix of convexities) instead of the default scalar summary.</p><p>Use with <code>duration</code> and <code>convexity</code> when a <code>ZeroRateCurve</code> is the rate input:</p><pre><code class="language-julia hljs">duration(KeyRates(), zrc, cfs, times)            # vector of key rate durations
duration(DV01(), KeyRates(), zrc, cfs, times)     # vector of key rate DV01s
convexity(KeyRates(), zrc, cfs, times)            # matrix of key rate convexities</code></pre><p>Without <code>KeyRates()</code>, these functions return a scalar (the sum of the decomposition).</p><p>See also: <a href="#ActuaryUtilities.FinancialMath.DV01"><code>DV01</code></a>, <a href="#ActuaryUtilities.FinancialMath.IR01"><code>IR01</code></a>, <a href="#ActuaryUtilities.FinancialMath.CS01"><code>CS01</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL158-L175">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.breakeven"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.breakeven"><code>ActuaryUtilities.FinancialMath.breakeven</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">breakeven(yield, cashflows::Vector)
breakeven(yield, cashflows::Vector,times::Vector)</code></pre><p>Calculate the time when the accumulated cashflows breakeven given the yield.</p><p>Assumptions:</p><ul><li>cashflows occur at the end of the period</li><li>cashflows evenly spaced with the first one occuring at time zero if <code>times</code> not given</li></ul><p>Returns <code>nothing</code> if cashflow stream never breaks even.</p><pre><code class="language-julia hljs">julia&gt; breakeven(0.10, [-10,1,2,3,4,8])
5

julia&gt; breakeven(0.10, [-10,15,2,3,4,8])
1

julia&gt; breakeven(0.10, [-10,-15,2,3,4,8]) # returns the `nothing` value

</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL67-L91">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.convexity-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.convexity-Tuple{Any, Any, Any}"><code>ActuaryUtilities.FinancialMath.convexity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convexity(yield,cfs,times)
convexity(yield,valuation_function)</code></pre><p>Calculates the convexity.     - <code>yield</code> should be a fixed effective yield (e.g. <code>0.05</code>).     - <code>times</code> may be omitted and it will assume <code>cfs</code> are evenly spaced beginning at the end of the first period.</p><p><strong>Examples</strong></p><p>Using vectors of cashflows and times</p><pre><code class="language-julia-repl hljs">julia&gt; times = 1:5
julia&gt; cfs = [0,0,0,0,100]
julia&gt; duration(0.03,cfs,times)
4.854368932038834
julia&gt; duration(Macaulay(),0.03,cfs,times)
5.0
julia&gt; duration(Modified(),0.03,cfs,times)
4.854368932038835
julia&gt; convexity(0.03,cfs,times)
28.277877274012614
</code></pre><p>Using any given value function: </p><pre><code class="language-julia-repl hljs">julia&gt; lump_sum_value(amount,years,i) = amount / (1 + i ) ^ years
julia&gt; my_lump_sum_value(i) = lump_sum_value(100,5,i)
julia&gt; duration(0.03,my_lump_sum_value)
4.854368932038835
julia&gt; convexity(0.03,my_lump_sum_value)
28.277877274012617
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL387-L424">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.convexity-Tuple{Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.convexity-Tuple{Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.FinancialMath.convexity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convexity(base::ZeroRateCurve, credit::ZeroRateCurve, cfs, times) -&gt; NamedTuple of scalars</code></pre><p>Compute scalar two-curve convexity. Returns a <code>NamedTuple</code> with scalar <code>base</code>, <code>credit</code>, and <code>cross</code> values (sums of the corresponding key rate matrices).</p><p>For the full key-rate decomposition (matrices), use <a href="#ActuaryUtilities.FinancialMath.KeyRates"><code>KeyRates()</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL888-L895">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.convexity-Tuple{Function, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.convexity-Tuple{Function, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.FinancialMath.convexity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convexity(zrc::ZeroRateCurve, cfs, times) -&gt; scalar
convexity(valuation_fn::Function, zrc::ZeroRateCurve) -&gt; scalar</code></pre><p>Compute the scalar convexity for a <code>ZeroRateCurve</code>: the sum of all elements of the key rate convexity matrix.</p><p>For the full key-rate decomposition (a matrix), use <a href="#ActuaryUtilities.FinancialMath.KeyRates"><code>KeyRates()</code></a>:</p><pre><code class="language-julia hljs">convexity(KeyRates(), zrc, cfs, times)   # matrix
convexity(zrc, cfs, times)               # scalar (≡ sum of above)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL833-L846">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.convexity-Tuple{KeyRates, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.convexity-Tuple{KeyRates, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.FinancialMath.convexity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convexity(::KeyRates, base::ZeroRateCurve, credit::ZeroRateCurve, cfs, times) -&gt; NamedTuple of matrices</code></pre><p>Compute two-curve convexity. Returns a <code>NamedTuple</code> with <code>base</code>, <code>credit</code>, and <code>cross</code> matrices.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL905-L909">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.convexity-Tuple{KeyRates, Function, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.convexity-Tuple{KeyRates, Function, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.FinancialMath.convexity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convexity(::KeyRates, zrc::ZeroRateCurve, cfs, times) -&gt; Matrix
convexity(::KeyRates, valuation_fn::Function, zrc::ZeroRateCurve) -&gt; Matrix</code></pre><p>Compute key rate convexity matrix: <code>∂²V/∂rᵢ∂rⱼ / V</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using FinanceModels
zrc = ZeroRateCurve([0.03, 0.03, 0.03], [1.0, 2.0, 3.0])

# Key rate convexity matrix
conv = convexity(KeyRates(), zrc, [5.0, 5.0, 105.0], [1.0, 2.0, 3.0])

# Scalar convexity
convexity(zrc, [5.0, 5.0, 105.0], [1.0, 2.0, 3.0])   # ≡ sum(conv)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL855-L873">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.moic-Tuple{T} where T&lt;:AbstractArray"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.moic-Tuple{T} where T&lt;:AbstractArray"><code>ActuaryUtilities.FinancialMath.moic</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">moic(cashflows&lt;:AbstractArray)</code></pre><p>The multiple on invested capital (&quot;moic&quot;) is the un-discounted sum of distributions divided by the sum of the contributions. The function assumes that negative numbers in the array represent contributions and positive numbers represent distributions.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; moic([-10,20,30])
5.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL575-L587">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.present_values"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.present_values"><code>ActuaryUtilities.FinancialMath.present_values</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">present_values(interest, cashflows, timepoints)</code></pre><p>Efficiently calculate a vector representing the present value of the given cashflows at each period prior to the given timepoint.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; present_values(0.00, [1,1,1])
[3,2,1]

julia&gt; present_values(ForwardYield([0.1,0.2]), [10,20],[0,1]) # after `using FinanceModels`
2-element Vector{Float64}:
 28.18181818181818
 18.18181818181818</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL17-L33">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.price-Tuple{Any, Any}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.price-Tuple{Any, Any}"><code>ActuaryUtilities.FinancialMath.price</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">price(...)</code></pre><p>The absolute value of the <code>present_value(...)</code>. </p><p><strong>Extended help</strong></p><p>Using <code>price</code> can be helpful if the directionality of the value doesn&#39;t matter. For example, in the common usage, duration is more interested in the change in price than present value, so <code>price</code> is used there.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL55-L63">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.sensitivities-Tuple{Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.sensitivities-Tuple{Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.FinancialMath.sensitivities</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sensitivities(valuation_fn, base::ZeroRateCurve, credit::ZeroRateCurve)
sensitivities(base::ZeroRateCurve, credit::ZeroRateCurve, cfs, times)</code></pre><p>Two-curve sensitivities. Returns base/credit durations and convexity matrices.</p><p>For DV01s instead of durations, use <code>sensitivities(DV01(), base, credit, cfs, times)</code>.</p><p>The <code>convexities.cross</code> matrix <code>[i,j] = ∂²V/(∂base_rᵢ ∂credit_rⱼ) / V</code> captures interaction effects between base and credit rate movements — relevant when the two curves move in correlated fashion (e.g., both driven by macro factors).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL1011-L1022">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.sensitivities-Tuple{Function, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.sensitivities-Tuple{Function, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.FinancialMath.sensitivities</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sensitivities(zrc::ZeroRateCurve, valuation_fn::Function)
sensitivities(zrc::ZeroRateCurve, cfs, times)</code></pre><p>Compute value, key rate durations, and convexity matrix in a single efficient AD pass.</p><p>Always returns the full key-rate decomposition (vectors and matrices), equivalent to the <code>KeyRates()</code> dispatch of <code>duration</code> and <code>convexity</code>. Use <code>duration(zrc, ...)</code> or <code>convexity(zrc, ...)</code> directly if you only need scalar summaries.</p><p>Returns a <code>NamedTuple</code> with:</p><ul><li><code>value</code>: the scalar present value</li><li><code>durations</code>: modified key rate durations (<code>-∂V/∂rᵢ / V</code>) — vector</li><li><code>convexities</code>: cross-convexity matrix (<code>∂²V/∂rᵢ∂rⱼ / V</code>) — matrix</li></ul><p>For DV01s instead of durations, use <code>sensitivities(DV01(), zrc, cfs, times)</code>.</p><p>Supports do-block syntax:</p><pre><code class="language-julia hljs">using FinanceModels
zrc = ZeroRateCurve([0.03, 0.03, 0.03], [1.0, 2.0, 3.0])
result = sensitivities(zrc) do curve
    sum(cf * curve(t) for (cf, t) in zip([5.0, 5.0, 105.0], [1.0, 2.0, 3.0]))
end</code></pre><p>When using stochastic (Monte Carlo) valuations, you must fix the RNG seed so that the same random draws are used for every AD perturbation:</p><pre><code class="language-julia hljs">result = sensitivities(zrc) do curve
    hw = HullWhite(0.1, 0.01, curve)
    pv_mc(hw, contract; n_scenarios=1000, rng=MersenneTwister(42))
end</code></pre><p>Without a fixed seed, gradients will be noisy and incorrect.</p><p>Pathwise AD is invalid for discontinuous payoffs (digital options, barriers). For those cases, use finite differences instead.</p><p>To obtain traditional scalar sensitivities from the results, sum the vector/matrix fields:</p><pre><code class="language-julia hljs">result = sensitivities(zrc, cfs, [1.0, 2.0, 3.0])
sum(result.durations)    # scalar modified duration
sum(result.convexities)  # scalar convexity</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL930-L979">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.FinancialMath.spread"><a class="docstring-binding" href="#ActuaryUtilities.FinancialMath.spread"><code>ActuaryUtilities.FinancialMath.spread</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">spread(curve1,curve2,cashflows)</code></pre><p>Return the solved-for constant spread to add to <code>curve1</code> in order to equate the discounted <code>cashflows</code> with <code>curve2</code></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">spread(0.04, 0.05, cfs)
Rate{Float64, Periodic}(0.010000000000000009, Periodic(1))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL545-L557">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{ActuaryUtilities.FinancialMath.KeyRateDuration, Vararg{Any, 4}}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{ActuaryUtilities.FinancialMath.KeyRateDuration, Vararg{Any, 4}}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(keyrate::KeyRateDuration,curve,cashflows)    
duration(keyrate::KeyRateDuration,curve,cashflows,timepoints)
duration(keyrate::KeyRateDuration,curve,cashflows,timepoints,krd_points)</code></pre><p>Calculate the key rate duration by shifting the <strong>zero</strong> (not par) curve by the kwarg <code>shift</code> at the timepoint specified by a KeyRateDuration(time).</p><p>The approach is to carve up the curve into <code>krd_points</code> (default is the unit steps between <code>1</code> and  the last timepoint of the casfhlows). The  zero rate corresponding to the timepoint within the <code>KeyRateDuration</code> is shifted by <code>shift</code> (specified by the <code>KeyRateZero</code> or <code>KeyRatePar</code> constructors. A new curve is created from the shifted rates. This means that the  &quot;width&quot; of the shifted section is ± 1 time period, unless specific points are specified via <code>krd_points</code>.</p><p>The <code>curve</code> may be any FinanceModels.jl curve (e.g. does not have to be a curve constructed via <code>FinanceModels.Zero(...)</code>).</p><p>!!! Experimental: Due to the paucity of examples in the literature, this feature does not have unit tests like the rest of JuliaActuary functionality. Additionally, the API may change in a future major/minor version update.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; riskfree_maturities = [0.5, 1.0, 1.5, 2.0];

julia&gt; riskfree    = [0.05, 0.058, 0.064,0.068];

julia&gt; rf_curve = FinanceModels.Zero(riskfree,riskfree_maturities);

julia&gt; cfs = [10,10,10,10,10];

julia&gt; duration(KeyRate(1),rf_curve,cfs)
8.932800152336995
</code></pre><p><strong>Extended Help</strong></p><p>Key Rate Duration is not a well specified topic in the literature and in practice. The reference below suggest that shocking the par curve is more common  in practice, but that the zero curve produces more consistent results. Future versions may support shifting the par curve.</p><p>References: </p><ul><li><a href="https://quant.stackexchange.com/questions/33891/to-compute-key-rate-duration-shall-i-use-par-curve-or-zero-curve">Quant Finance Stack Exchange: To compute key rate duration, shall I use par curve or zero curve?</a></li><li>(Financial Exam Help 123](http://www.financialexamhelp123.com/key-rate-duration/)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL441-L482">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{CS01, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{CS01, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(::CS01, base::ZeroRateCurve, credit::ZeroRateCurve, cfs, times) -&gt; scalar</code></pre><p>Compute scalar CS01 for a two-curve valuation. For key-rate decomposition, use <code>KeyRates()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL794-L798">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{CS01, KeyRates, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{CS01, KeyRates, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(::CS01, ::KeyRates, base::ZeroRateCurve, credit::ZeroRateCurve, cfs, times) -&gt; Vector</code></pre><p>Compute key rate DV01s for the credit spread curve: <code>-∂V/∂credit_rᵢ / 10000</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL807-L811">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{CS01, Vararg{Any, 4}}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{CS01, Vararg{Any, 4}}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(CS01(), base_curve, credit_spread, cfs, times)
duration(CS01(), base_curve, credit_spread, cfs)</code></pre><p>Calculate the CS01 (Credit Spread 01): the dollar change in value for a 1 basis point parallel shift in the credit spread, holding the risk-free (base) curve constant.</p><p>The total discount rate is assumed to be <code>base_curve + credit_spread</code>. For a flat additive decomposition (e.g. scalar rates), <code>CS01 ≈ IR01 ≈ DV01</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; cfs = [5, 5, 5, 105];

julia&gt; times = 1:4;

julia&gt; duration(CS01(), 0.03, 0.02, cfs, times)
0.03465054893498076

julia&gt; duration(CS01(), 0.03, 0.02, cfs, times) ≈ duration(DV01(), 0.05, cfs, times)
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL356-L377">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{DV01, Function, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{DV01, Function, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(::DV01, zrc::ZeroRateCurve, cfs, times) -&gt; scalar
duration(::DV01, valuation_fn::Function, zrc::ZeroRateCurve) -&gt; scalar</code></pre><p>Compute the scalar DV01 for a <code>ZeroRateCurve</code>: the sum of all key rate DV01s.</p><p>For the full key-rate decomposition (a vector), use <a href="#ActuaryUtilities.FinancialMath.KeyRates"><code>KeyRates()</code></a>:</p><pre><code class="language-julia hljs">duration(DV01(), KeyRates(), zrc, cfs, times)   # vector
duration(DV01(), zrc, cfs, times)                # scalar (≡ sum of above)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL711-L723">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{DV01, KeyRates, Function, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{DV01, KeyRates, Function, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(::DV01, ::KeyRates, zrc::ZeroRateCurve, cfs, times) -&gt; Vector
duration(::DV01, ::KeyRates, valuation_fn::Function, zrc::ZeroRateCurve) -&gt; Vector</code></pre><p>Compute key rate DV01s as a vector: <code>-∂V/∂rᵢ / 10000</code> for each tenor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL732-L737">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{Function, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{Function, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(zrc::ZeroRateCurve, cfs, times) -&gt; scalar
duration(valuation_fn::Function, zrc::ZeroRateCurve) -&gt; scalar</code></pre><p>Compute the scalar modified duration for a <code>ZeroRateCurve</code>: the sum of all key rate durations.</p><p>For the full key-rate decomposition (a vector), use <a href="#ActuaryUtilities.FinancialMath.KeyRates"><code>KeyRates()</code></a>:</p><pre><code class="language-julia hljs">duration(KeyRates(), zrc, cfs, times)   # vector
duration(zrc, cfs, times)               # scalar (≡ sum of above)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL649-L661">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{IR01, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{IR01, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(::IR01, base::ZeroRateCurve, credit::ZeroRateCurve, cfs, times) -&gt; scalar</code></pre><p>Compute scalar IR01 for a two-curve valuation. For key-rate decomposition, use <code>KeyRates()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL757-L761">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{IR01, KeyRates, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{IR01, KeyRates, Function, FinanceModels.Yield.ZeroRateCurve, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(::IR01, ::KeyRates, base::ZeroRateCurve, credit::ZeroRateCurve, cfs, times) -&gt; Vector</code></pre><p>Compute key rate DV01s for the base (risk-free) curve: <code>-∂V/∂base_rᵢ / 10000</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL770-L774">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{IR01, Vararg{Any, 4}}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{IR01, Vararg{Any, 4}}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(IR01(), base_curve, credit_spread, cfs, times)
duration(IR01(), base_curve, credit_spread, cfs)</code></pre><p>Calculate the IR01 (Interest Rate 01): the dollar change in value for a 1 basis point parallel shift in the risk-free (base) curve, holding the credit spread constant.</p><p>The total discount rate is assumed to be <code>base_curve + credit_spread</code>. For a flat additive decomposition (e.g. scalar rates), <code>IR01 ≈ CS01 ≈ DV01</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; cfs = [5, 5, 5, 105];

julia&gt; times = 1:4;

julia&gt; duration(IR01(), 0.03, 0.02, cfs, times)
0.03465054893498076

julia&gt; duration(IR01(), 0.03, 0.02, cfs, times) ≈ duration(DV01(), 0.05, cfs, times)
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL325-L346">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{KeyRates, Function, FinanceModels.Yield.ZeroRateCurve}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{KeyRates, Function, FinanceModels.Yield.ZeroRateCurve}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(::KeyRates, zrc::ZeroRateCurve, cfs, times) -&gt; Vector
duration(::KeyRates, valuation_fn::Function, zrc::ZeroRateCurve) -&gt; Vector</code></pre><p>Compute key rate durations (modified) as a vector: <code>-∂V/∂rᵢ / V</code> for each tenor.</p><p>When called with a function, it receives a curve and returns a scalar value (do-block syntax).</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using FinanceModels
zrc = ZeroRateCurve([0.03, 0.03, 0.03], [1.0, 2.0, 3.0])
cfs = [5.0, 5.0, 105.0]

# Key rate durations (vector)
krds = duration(KeyRates(), zrc, cfs, [1.0, 2.0, 3.0])

# Scalar modified duration
duration(zrc, cfs, [1.0, 2.0, 3.0])   # ≡ sum(krds)

# Do-block for custom valuation
krds = duration(KeyRates(), zrc) do curve
    sum(cf * curve(t) for (cf, t) in zip(cfs, [1.0, 2.0, 3.0]))
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL670-L696">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ActuaryUtilities.duration-Tuple{Macaulay, Any, Any, Any}"><a class="docstring-binding" href="#ActuaryUtilities.duration-Tuple{Macaulay, Any, Any, Any}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">duration(Macaulay(),interest_rate,cfs,times)
duration(Modified(),interest_rate,cfs,times)
duration(DV01(),interest_rate,cfs,times)
duration(IR01(),base_curve,credit_spread,cfs,times)
duration(CS01(),base_curve,credit_spread,cfs,times)
duration(interest_rate,cfs,times)             # Modified Duration
duration(interest_rate,valuation_function)    # Modified Duration</code></pre><p>Calculates the Macaulay, Modified, DV01, IR01, or CS01 duration. <code>times</code> may be ommitted and the valuation will assume evenly spaced cashflows starting at the end of the first period.</p><p>Note that the calculated duration will depend on the periodicity convention of the <code>interest_rate</code>: a <code>Periodic</code> yield (or yield model with that convention) will be a slightly different computed duration than a <code>Continous</code> which follows from the present value differing according to the periodicity.</p><p>When not given <code>Modified()</code> or <code>Macaulay()</code> as an argument, will default to <code>Modified()</code>.</p><ul><li>Modified duration: the relative change per point of yield change.</li><li>Macaulay: the cashflow-weighted average time.</li><li>DV01: the absolute change per basis point (hundredth of a percentage point).</li><li>IR01: the absolute change per basis point shift in the risk-free (base) curve, holding credit spread constant.</li><li>CS01: the absolute change per basis point shift in the credit spread, holding the risk-free (base) curve constant.</li></ul><p><strong>Examples</strong></p><p>Using vectors of cashflows and times</p><pre><code class="language-julia-repl hljs">julia&gt; times = 1:5;

julia&gt; cfs = [0,0,0,0,100];

julia&gt; duration(0.03,cfs,times)
4.854368932038835

julia&gt; duration(Periodic(0.03,1),cfs,times)
4.854368932038835

julia&gt; duration(Continuous(0.03),cfs,times)
5.0

julia&gt; duration(Macaulay(),0.03,cfs,times)
5.0

julia&gt; duration(Modified(),0.03,cfs,times)
4.854368932038835

julia&gt; convexity(0.03,cfs,times)
28.277877274012614
</code></pre><p>Using any given value function: </p><pre><code class="language-julia-repl hljs">julia&gt; lump_sum_value(amount,years,i) = amount / (1 + i ) ^ years
julia&gt; my_lump_sum_value(i) = lump_sum_value(100,5,i)
julia&gt; duration(0.03,my_lump_sum_value)
4.854368932038835
julia&gt; convexity(0.03,my_lump_sum_value)
28.277877274012617
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/2cb43468ec5d2d4702eabf24a8cce6f448f4e8db/src/financial_math.jl#LL227-L287">source</a></section></details></article><h3 id="Unexported-API"><a class="docs-heading-anchor" href="#Unexported-API">Unexported API</a><a id="Unexported-API-1"></a><a class="docs-heading-anchor-permalink" href="#Unexported-API" title="Permalink"></a></h3></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Overview</a><a class="docs-footer-nextpage" href="../sensitivities/">Key Rate Sensitivities »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Sunday 15 February 2026 21:48">Sunday 15 February 2026</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
