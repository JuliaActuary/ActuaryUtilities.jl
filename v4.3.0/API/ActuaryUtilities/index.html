<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ActuaryUtilities · ActuaryUtilities.jl</title><meta name="title" content="ActuaryUtilities · ActuaryUtilities.jl"/><meta property="og:title" content="ActuaryUtilities · ActuaryUtilities.jl"/><meta property="twitter:title" content="ActuaryUtilities · ActuaryUtilities.jl"/><meta name="description" content="Documentation for ActuaryUtilities.jl."/><meta property="og:description" content="Documentation for ActuaryUtilities.jl."/><meta property="twitter:description" content="Documentation for ActuaryUtilities.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="ActuaryUtilities.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ActuaryUtilities.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Modules</span><ul><li class="is-active"><a class="tocitem" href>ActuaryUtilities</a><ul class="internal"><li><a class="tocitem" href="#Exported-API"><span>Exported API</span></a></li><li><a class="tocitem" href="#Unexported-API"><span>Unexported API</span></a></li></ul></li><li><a class="tocitem" href="../FinanceCore/">FinanceCore</a></li></ul></li><li><a class="tocitem" href="../../upgrade/">Upgrade from Prior Versions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Modules</a></li><li class="is-active"><a href>ActuaryUtilities</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ActuaryUtilities</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/master/docs/src/API/ActuaryUtilities.md#L" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ActuaryUtilities-API-Reference"><a class="docs-heading-anchor" href="#ActuaryUtilities-API-Reference">ActuaryUtilities API Reference</a><a id="ActuaryUtilities-API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#ActuaryUtilities-API-Reference" title="Permalink"></a></h1><ul><li><a href="#ActuaryUtilities.KeyRate"><code>ActuaryUtilities.KeyRate</code></a></li><li><a href="#ActuaryUtilities.KeyRatePar"><code>ActuaryUtilities.KeyRatePar</code></a></li><li><a href="#ActuaryUtilities.KeyRateZero"><code>ActuaryUtilities.KeyRateZero</code></a></li><li><a href="#ActuaryUtilities.CTE-Tuple{Any, Any}"><code>ActuaryUtilities.CTE</code></a></li><li><a href="#ActuaryUtilities.ConditionalTailExpectation"><code>ActuaryUtilities.ConditionalTailExpectation</code></a></li><li><a href="#ActuaryUtilities.VaR-Tuple{Any, Any}"><code>ActuaryUtilities.VaR</code></a></li><li><a href="#ActuaryUtilities.ValueAtRisk"><code>ActuaryUtilities.ValueAtRisk</code></a></li><li><a href="#ActuaryUtilities.accum_offset-Tuple{Any}"><code>ActuaryUtilities.accum_offset</code></a></li><li><a href="#ActuaryUtilities.breakeven"><code>ActuaryUtilities.breakeven</code></a></li><li><a href="#ActuaryUtilities.convexity-Tuple{Any, Any, Any}"><code>ActuaryUtilities.convexity</code></a></li><li><a href="#ActuaryUtilities.duration-Tuple{Dates.Date, Dates.Date}"><code>ActuaryUtilities.duration</code></a></li><li><a href="#ActuaryUtilities.duration-Tuple{Macaulay, Any, Any, Any}"><code>ActuaryUtilities.duration</code></a></li><li><a href="#ActuaryUtilities.duration-Tuple{ActuaryUtilities.KeyRateDuration, Vararg{Any, 4}}"><code>ActuaryUtilities.duration</code></a></li><li><a href="#ActuaryUtilities.moic-Tuple{T} where T&lt;:AbstractArray"><code>ActuaryUtilities.moic</code></a></li><li><a href="#ActuaryUtilities.present_values"><code>ActuaryUtilities.present_values</code></a></li><li><a href="#ActuaryUtilities.price-Tuple{Any, Any}"><code>ActuaryUtilities.price</code></a></li><li><a href="#ActuaryUtilities.spread"><code>ActuaryUtilities.spread</code></a></li><li><a href="#ActuaryUtilities.years_between"><code>ActuaryUtilities.years_between</code></a></li></ul><h2 id="Exported-API"><a class="docs-heading-anchor" href="#Exported-API">Exported API</a><a id="Exported-API-1"></a><a class="docs-heading-anchor-permalink" href="#Exported-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.KeyRate" href="#ActuaryUtilities.KeyRate"><code>ActuaryUtilities.KeyRate</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">KeyRate(timepoints,shift=0.001)</code></pre><p>A convenience constructor for <a href="#ActuaryUtilities.KeyRateZero"><code>KeyRateZero</code></a>. </p><p><strong>Extended Help</strong></p><p><a href="#ActuaryUtilities.KeyRateZero"><code>KeyRateZero</code></a> is chosen as the default constructor because it has more attractive properties than <a href="#ActuaryUtilities.KeyRatePar"><code>KeyRatePar</code></a>:</p><ul><li>rates after the key <code>timepoint</code> remain unaffected by the <code>shift</code><ul><li>e.g. this causes a 6-year zero coupon bond would have a negative duration if the 5-year par rate was used</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL145-L157">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.KeyRatePar" href="#ActuaryUtilities.KeyRatePar"><code>ActuaryUtilities.KeyRatePar</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">KeyRatePar(timepoint,shift=0.001) &lt;: KeyRateDuration</code></pre><p>Shift the par curve by the given amount at the given timepoint. Use in conjunction with <code>duration</code> to calculate the key rate duration. </p><p>Unlike other duration statistics which are computed using analytic derivatives, <code>KeyRateDuration</code>s are computed via a shift-and-compute the yield curve approach.</p><p><code>KeyRatePar</code> is more commonly reported (than <a href="#ActuaryUtilities.KeyRateZero"><code>KeyRateZero</code></a>) in the fixed income markets, even though the latter has more analytically attractive properties. See the discussion of KeyRateDuration in the FinanceModels.jl docs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL114-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.KeyRateZero" href="#ActuaryUtilities.KeyRateZero"><code>ActuaryUtilities.KeyRateZero</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">KeyRateZero(timepoint,shift=0.001) &lt;: KeyRateDuration</code></pre><p>Shift the par curve by the given amount at the given timepoint. Use in conjunction with <code>duration</code> to calculate the key rate duration.</p><p>Unlike other duration statistics which are computed using analytic derivatives, <code>KeyRateDuration</code> is computed via a shift-and-compute the yield curve approach.</p><p><code>KeyRateZero</code> is less commonly reported (than <a href="#ActuaryUtilities.KeyRatePar"><code>KeyRatePar</code></a>) in the fixed income markets, even though the latter has more analytically attractive properties. See the discussion of KeyRateDuration in the FinanceModels.jl docs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL130-L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.CTE-Tuple{Any, Any}" href="#ActuaryUtilities.CTE-Tuple{Any, Any}"><code>ActuaryUtilities.CTE</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">CTE(v::AbstractArray,p::Real;rev::Bool=false)</code></pre><p>The average of the values ≥ the <code>p</code>th percentile of the vector <code>v</code> is the Conditiona Tail Expectation. Assumes more positive values are higher risk measures, so a higher p will return a more positive number, but this can be reversed if <code>rev</code> is <code>true</code>.</p><p>May also be called with <code>ConditionalTailExpectation(...)</code>.</p><p>Also known as Tail Value at Risk (TVaR), or Tail Conditional Expectation (TCE)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/risk_measures.jl#LL20-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.ConditionalTailExpectation" href="#ActuaryUtilities.ConditionalTailExpectation"><code>ActuaryUtilities.ConditionalTailExpectation</code></a> — <span class="docstring-category">Function</span></header><section><div><p><a href="#ActuaryUtilities.CTE-Tuple{Any, Any}"><code>CTE</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/risk_measures.jl#LL46-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.VaR-Tuple{Any, Any}" href="#ActuaryUtilities.VaR-Tuple{Any, Any}"><code>ActuaryUtilities.VaR</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">VaR(v::AbstractArray,p::Real;rev::Bool=false)</code></pre><p>The <code>p</code>th quantile of the vector <code>v</code> is the Value at Risk. Assumes more positive values are higher risk measures, so a higher p will return a more positive number, but this can be reversed if <code>rev</code> is <code>true</code>.</p><p>Also can be called with <code>ValueAtRisk(...)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/risk_measures.jl#LL1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.ValueAtRisk" href="#ActuaryUtilities.ValueAtRisk"><code>ActuaryUtilities.ValueAtRisk</code></a> — <span class="docstring-category">Function</span></header><section><div><p><a href="#ActuaryUtilities.VaR-Tuple{Any, Any}"><code>VaR</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/risk_measures.jl#LL15-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.accum_offset-Tuple{Any}" href="#ActuaryUtilities.accum_offset-Tuple{Any}"><code>ActuaryUtilities.accum_offset</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">accum_offset(x; op=*, init=1.0)</code></pre><p>A shortcut for the common operation wherein a vector is scanned with an operation, but has an initial value and the resulting array is offset from the traditional accumulate. </p><p>This is a common pattern when calculating things like survivorship given a mortality vector and you want the first value of the resulting vector to be <code>1.0</code>, and the second value to be <code>1.0 * x[1]</code>, etc.</p><p>Two keyword arguments:</p><ul><li><code>op</code> is the binary (two argument) operator you want to use, such as <code>*</code> or <code>+</code></li><li><code>init</code> is the initial value in the returned array</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; accum_offset([0.9, 0.8, 0.7])
3-element Array{Float64,1}:
 1.0
 0.9
 0.7200000000000001

julia&gt; accum_offset(1:5) # the product of elements 1:n, with the default `1` as the first value
5-element Array{Int64,1}:
  1
  1
  2
  6
 24

julia&gt; accum_offset(1:5,op=+)
5-element Array{Int64,1}:
  1
  2
  4
  7
 11
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/ActuaryUtilities.jl#LL98-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.breakeven" href="#ActuaryUtilities.breakeven"><code>ActuaryUtilities.breakeven</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">breakeven(yield, cashflows::Vector)
breakeven(yield, cashflows::Vector,times::Vector)</code></pre><p>Calculate the time when the accumulated cashflows breakeven given the yield.</p><p>Assumptions:</p><ul><li>cashflows occur at the end of the period</li><li>cashflows evenly spaced with the first one occuring at time zero if <code>times</code> not given</li></ul><p>Returns <code>nothing</code> if cashflow stream never breaks even.</p><pre><code class="language-julia-repl hljs">julia&gt; breakeven(0.10, [-10,1,2,3,4,8])
5

julia&gt; breakeven(0.10, [-10,15,2,3,4,8])
1

julia&gt; breakeven(0.10, [-10,-15,2,3,4,8]) # returns the `nothing` value

</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL51-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.convexity-Tuple{Any, Any, Any}" href="#ActuaryUtilities.convexity-Tuple{Any, Any, Any}"><code>ActuaryUtilities.convexity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convexity(yield,cfs,times)
convexity(yield,valuation_function)</code></pre><p>Calculates the convexity.     - <code>yield</code> should be a fixed effective yield (e.g. <code>0.05</code>).     - <code>times</code> may be omitted and it will assume <code>cfs</code> are evenly spaced beginning at the end of the first period.</p><p><strong>Examples</strong></p><p>Using vectors of cashflows and times</p><pre><code class="language-julia-repl hljs">julia&gt; times = 1:5
julia&gt; cfs = [0,0,0,0,100]
julia&gt; duration(0.03,cfs,times)
4.854368932038834
julia&gt; duration(Macaulay(),0.03,cfs,times)
5.0
julia&gt; duration(Modified(),0.03,cfs,times)
4.854368932038835
julia&gt; convexity(0.03,cfs,times)
28.277877274012614
</code></pre><p>Using any given value function: </p><pre><code class="language-julia-repl hljs">julia&gt; lump_sum_value(amount,years,i) = amount / (1 + i ) ^ years
julia&gt; my_lump_sum_value(i) = lump_sum_value(100,5,i)
julia&gt; duration(0.03,my_lump_sum_value)
4.854368932038835
julia&gt; convexity(0.03,my_lump_sum_value)
28.277877274012617
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL254-L292">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.duration-Tuple{ActuaryUtilities.KeyRateDuration, Vararg{Any, 4}}" href="#ActuaryUtilities.duration-Tuple{ActuaryUtilities.KeyRateDuration, Vararg{Any, 4}}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">duration(keyrate::KeyRateDuration,curve,cashflows)    
duration(keyrate::KeyRateDuration,curve,cashflows,timepoints)
duration(keyrate::KeyRateDuration,curve,cashflows,timepoints,krd_points)</code></pre><p>Calculate the key rate duration by shifting the <strong>zero</strong> (not par) curve by the kwarg <code>shift</code> at the timepoint specified by a KeyRateDuration(time).</p><p>The approach is to carve up the curve into <code>krd_points</code> (default is the unit steps between <code>1</code> and  the last timepoint of the casfhlows). The  zero rate corresponding to the timepoint within the <code>KeyRateDuration</code> is shifted by <code>shift</code> (specified by the <code>KeyRateZero</code> or <code>KeyRatePar</code> constructors. A new curve is created from the shifted rates. This means that the  &quot;width&quot; of the shifted section is ± 1 time period, unless specific points are specified via <code>krd_points</code>.</p><p>The <code>curve</code> may be any FinanceModels.jl curve (e.g. does not have to be a curve constructed via <code>FinanceModels.Zero(...)</code>).</p><p>!!! Experimental: Due to the paucity of examples in the literature, this feature does not have unit tests like the rest of JuliaActuary functionality. Additionally, the API may change in a future major/minor version update.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; riskfree_maturities = [0.5, 1.0, 1.5, 2.0];

julia&gt; riskfree    = [0.05, 0.058, 0.064,0.068];

julia&gt; rf_curve = FinanceModels.Zero(riskfree,riskfree_maturities);

julia&gt; cfs = [10,10,10,10,10];

julia&gt; duration(KeyRate(1),rf_curve,cfs)
8.932800152336995
</code></pre><p><strong>Extended Help</strong></p><p>Key Rate Duration is not a well specified topic in the literature and in practice. The reference below suggest that shocking the par curve is more common  in practice, but that the zero curve produces more consistent results. Future versions may support shifting the par curve.</p><p>References: </p><ul><li><a href="https://quant.stackexchange.com/questions/33891/to-compute-key-rate-duration-shall-i-use-par-curve-or-zero-curve">Quant Finance Stack Exchange: To compute key rate duration, shall I use par curve or zero curve?</a></li><li>(Financial Exam Help 123](http://www.financialexamhelp123.com/key-rate-duration/)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL308-L349">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.duration-Tuple{Dates.Date, Dates.Date}" href="#ActuaryUtilities.duration-Tuple{Dates.Date, Dates.Date}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">duration(d1::Date, d2::Date)</code></pre><p>Compute the duration given two dates, which is the number of years since the first date. The interval <code>[0,1)</code> is defined as having  duration <code>1</code>. Can return negative durations if second argument is before the first.</p><pre><code class="language-julia-repl hljs">julia&gt; issue_date  = Date(2018,9,30);

julia&gt; duration(issue_date , Date(2019,9,30) ) 
2
julia&gt; duration(issue_date , issue_date) 
1
julia&gt; duration(issue_date , Date(2018,10,1) ) 
1
julia&gt; duration(issue_date , Date(2019,10,1) ) 
2
julia&gt; duration(issue_date , Date(2018,6,30) ) 
0
julia&gt; duration(Date(2018,9,30),Date(2017,6,30)) 
-1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/ActuaryUtilities.jl#LL67-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.duration-Tuple{Macaulay, Any, Any, Any}" href="#ActuaryUtilities.duration-Tuple{Macaulay, Any, Any, Any}"><code>ActuaryUtilities.duration</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">duration(Macaulay(),interest_rate,cfs,times)
duration(Modified(),interest_rate,cfs,times)
duration(DV01(),interest_rate,cfs,times)
duration(interest_rate,cfs,times)             # Modified Duration
duration(interest_rate,valuation_function)    # Modified Duration</code></pre><p>Calculates the Macaulay, Modified, or DV01 duration. <code>times</code> may be ommitted and the valuation will assume evenly spaced cashflows starting at the end of the first period.</p><p>Note that the calculated duration will depend on the periodicity convention of the <code>interest_rate</code>: a <code>Periodic</code> yield (or yield model with that convention) will be a slightly different computed duration than a <code>Continous</code> which follows from the present value differing according to the periodicity.</p><p>When not given <code>Modified()</code> or <code>Macaulay()</code> as an argument, will default to <code>Modified()</code>.</p><ul><li>Modified duration: the relative change per point of yield change.</li><li>Macaulay: the cashflow-weighted average time.</li><li>DV01: the absolute change per basis point (hundredth of a percentage point).</li></ul><p><strong>Examples</strong></p><p>Using vectors of cashflows and times</p><pre><code class="language-julia-repl hljs">julia&gt; times = 1:5;

julia&gt; cfs = [0,0,0,0,100];

julia&gt; duration(0.03,cfs,times)
4.854368932038835

julia&gt; duration(Periodic(0.03,1),cfs,times)
4.854368932038835

julia&gt; duration(Continuous(0.03),cfs,times)
5.0

julia&gt; duration(Macaulay(),0.03,cfs,times)
5.0

julia&gt; duration(Modified(),0.03,cfs,times)
4.854368932038835

julia&gt; convexity(0.03,cfs,times)
28.277877274012614
</code></pre><p>Using any given value function: </p><pre><code class="language-julia-repl hljs">julia&gt; lump_sum_value(amount,years,i) = amount / (1 + i ) ^ years
julia&gt; my_lump_sum_value(i) = lump_sum_value(100,5,i)
julia&gt; duration(0.03,my_lump_sum_value)
4.854368932038835
julia&gt; convexity(0.03,my_lump_sum_value)
28.277877274012617
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL160-L217">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.moic-Tuple{T} where T&lt;:AbstractArray" href="#ActuaryUtilities.moic-Tuple{T} where T&lt;:AbstractArray"><code>ActuaryUtilities.moic</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">moic(cashflows&lt;:AbstractArray)</code></pre><p>The multiple on invested capital (&quot;moic&quot;) is the un-discounted sum of distributions divided by the sum of the contributions. The function assumes that negative numbers in the array represent contributions and positive numbers represent distributions.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; moic([-10,20,30])
5.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL436-L448">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.present_values" href="#ActuaryUtilities.present_values"><code>ActuaryUtilities.present_values</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">present_values(interest, cashflows, timepoints)</code></pre><p>Efficiently calculate a vector representing the present value of the given cashflows at each period prior to the given timepoint.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; present_values(0.00, [1,1,1])
[3,2,1]

julia&gt; present_values(ForwardYield([0.1,0.2]), [10,20],[0,1]) # after `using FinanceModels`
2-element Vector{Float64}:
 28.18181818181818
 18.18181818181818</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.price-Tuple{Any, Any}" href="#ActuaryUtilities.price-Tuple{Any, Any}"><code>ActuaryUtilities.price</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">price(...)</code></pre><p>The absolute value of the <code>present_value(...)</code>. </p><p><strong>Extended help</strong></p><p>Using <code>price</code> can be helpful if the directionality of the value doesn&#39;t matter. For example, in the common usage, duration is more interested in the change in price than present value, so <code>price</code> is used there.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL39-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.spread" href="#ActuaryUtilities.spread"><code>ActuaryUtilities.spread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">spread(curve1,curve2,cashflows)</code></pre><p>Return the solved-for constant spread to add to <code>curve1</code> in order to equate the discounted <code>cashflows</code> with <code>curve2</code></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">spread(0.04, 0.05, cfs)
Rate{Float64, Periodic}(0.010000000000000009, Periodic(1))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/financial_math.jl#LL412-L424">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ActuaryUtilities.years_between" href="#ActuaryUtilities.years_between"><code>ActuaryUtilities.years_between</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Years_Between(d1::Date, d2::Date)</code></pre><p>Compute the number of integer years between two dates, with the  first date typically before the second. Will return negative number if first date is after the second. Use third argument to indicate if calendar  anniversary should count as a full year.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; d1 = Date(2018,09,30);

julia&gt; d2 = Date(2019,09,30);

julia&gt; d3 = Date(2019,10,01);

julia&gt; years_between(d1,d3) 
1
julia&gt; years_between(d1,d2,false) # same month/day but `false` overlap
0 
julia&gt; years_between(d1,d2) # same month/day but `true` overlap
1 
julia&gt; years_between(d1,d2) # using default `true` overlap
1 </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActuary/ActuaryUtilities.jl/blob/0c2bfb94fc33bd3e30c3ad5979bedb1f16b1d15a/src/ActuaryUtilities.jl#LL19-L44">source</a></section></article><h2 id="Unexported-API"><a class="docs-heading-anchor" href="#Unexported-API">Unexported API</a><a id="Unexported-API-1"></a><a class="docs-heading-anchor-permalink" href="#Unexported-API" title="Permalink"></a></h2><p>Please <a href="https://github.com/JuliaActuary/ActuaryUtilities.jl/issues">open an issue</a> if you encounter any issues or confusion with the package.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../FinanceCore/">FinanceCore »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Saturday 28 October 2023 03:08">Saturday 28 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
